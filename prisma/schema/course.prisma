enum audience_target {
  participant
  accelerator
}

enum module_category {
  article
  quiz
  assignment
}

enum submission_status {
  in_progress
  submitted
  graded
}

model courses {
  id              String          @id @default(uuid())
  title           String
  description     String?
  created_at      DateTime        @default(now())
  updated_at      DateTime        @updatedAt
  
  classification  String?         
  audience_target audience_target

  is_published    Boolean         @default(false)
  published_at    DateTime?

  modules         course_modules[]

  @@map("courses")
}

model course_modules {
  id          String   @id @default(uuid())
  course_id   String

  title       String
  description String?
  sequence    Int

  created_at  DateTime @default(now())
  updated_at  DateTime @updatedAt

  course      courses  @relation(fields: [course_id], references: [id], onDelete: Cascade)

  items       course_module_items[]
}

model course_module_items {
  id        String          @id @default(uuid())
  module_id String

  title     String
  category  module_category 
  sequence  Int

  data      Json

  is_published Boolean @default(true)

  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  module     course_modules @relation(fields: [module_id], references: [id], onDelete: Cascade)
  
//   submissions course_item_submissions[]
}

// model course_item_submissions {
//   id        String   @id @default(uuid())
  
//   user_id   String   
//   item_id   String

//   score     Float?   
  
//   response_snapshot Json 

//   status    submission_status @default(in_progress)
  
//   submitted_at DateTime @default(now())
//   updated_at   DateTime @updatedAt

//   item      course_module_items @relation(fields: [item_id], references: [id])
  

//   @@unique([user_id, item_id])
// }